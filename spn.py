
def xor(a,b):
    t=""
    for i in range(len(a)):
        if a[i]==b[i]:
            t+="0"
        else:
            t+="1"
    return t
def sub(a):
    t=""
    s={
        '0000':'1110','0001':'0100','0010':'1101','0011':'0001','0100':'0010','0101':'1111','0110':'1011','0111':'1000','1000':'0011','1001':'1010','1010':'0110','1011':'1100','1100':'0101','1101':'1001','1110':'0000','1111':'0111'        
    }
    i=0
    while i+4 <= len(a):
        t+=s[a[i:i+4]]
        i=i+4
    return t

def perum(a):
    map={1:1,2:5,3:9,4:13,5:2,6:6,7:10,8:14,9:3,10:7,11:11,12:15,13:4,14:8,15:12,16:16}
    t=['']*16
    for i in range(len(map)):
        t[i]=a[map[i+1]-1]
    t1=""
    for i in t:
        t1+=i
    return t1


p = "0010011010110111"
key="001110101001010011010110001111110101"
n=5
w=[""]*n
k=[""]*(n+2)
u=[""]*(n+1)
v=[""]*(n+1)
key+=key
for i in range (1,n+2):
    k[i]=key[4*(i-1):4*(i-1)+len(p)]
    print(i,"  ",k[i])
w[0]=p
for r in range(1,n):
    u[r]=xor(w[r-1],k[r])
    v[r]=sub(u[r])
    w[r]=perum(v[r])
u[n]=xor(w[n-1],k[n])
v[n]=sub(u[n])
y=xor(k[n+1],v[n])
print(y)